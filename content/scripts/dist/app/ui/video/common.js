define(["jquery","pubsub"],function(e){var t;return{init:function(e){t=this,this._initVideoEvent(),this._setVideoThumbState(e)},_initVideoEvent:function(){e(".js-video").data("video.loaded")||e(".js-video").data("video.loaded","true").on("click",this._handleClick)},_handleClick:function(n){n.preventDefault();var r=e(this);t._setVideoThumbState(this),e.publish("/video/playing",[{videoid:r.attr("data-video-id")}])},_setVideoThumbState:function(t){var n=e(t);if(!this._isGallery(n))return;var r=n.attr("data-videoid"),i=this._getAllThumbs(n);this._changeIcon(i,r)},_changeIcon:function(t,n){t.each(function(){var t=e(this),r=t.find(".js-icon");if(t.attr("data-video-id")===n){r.removeClass("iconf-videoplay").addClass("iconf-videopause");return}r.removeClass("iconf-videopause").addClass("iconf-videoplay")})},_isGallery:function(e){return e.closest(".js-video-player").find(".js-carousel").length},_getAllThumbs:function(e){return e.closest(".js-video-player").find(".js-video-thumb")}}});