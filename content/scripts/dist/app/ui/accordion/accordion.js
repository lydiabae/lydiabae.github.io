define(["jquery","expandcollapse"],function(e){var t,n,r;return{init:function(){t=this,n=e(".js-expand-collapse"),r=e(".js-expand-collapse__all"),e(".js-expand-collapse").expandCollapse({header:".js-expand-collapse__header",content:".js-expand-collapse__body"}),this._initEvents()},_initEvents:function(){e(".js-expand-collapse__all").on("click",{$obj:this},this._processAllEvent),n.on("expandcollapse.clicked",{$obj:this},this._processHeaderClick),n.on("expandcollapse.clicked",{$obj:this},this._checkExpandedStatus)},_processAllEvent:function(t){t.preventDefault();var n,r=e(this),i=t.data.$obj;n=r.is(".is-expanded")?"expandcollapse.close":"expandcollapse.open",i._triggeraccordionEvents(n)},_processHeaderClick:function(){var t=e(this);if(typeof Modernizr!="undefined"&&Modernizr.csstransitions)return;t.find(".js-icon").toggleClass("icof-arrowdown icof-arrowup")},_checkExpandedStatus:function(){var i=e(this).closest("li"),s=n.filter(".is-expanded").length;i.hasClass("is-collapsed")&&n.length-s===1&&t._updateButton(r),i.hasClass("is-expanded")&&n.length==s&&t._updateButton(r)},_updateButton:function(e){var t;e.toggleClass("is-expanded is-collapsed"),e.find(".icof-plus, .icof-minus").toggleClass("icof-plus icof-minus"),t=e.is(".is-expanded")?"Close all":"Open all",e.find(".js-expand-collapse__text").text(t)},_triggeraccordionEvents:function(t){n.each(function(){var n=e(this);(!n.is(".is-expanded")||t!=="expandcollapse.open")&&(!n.is(".is-collapsed")||t!=="expandcollapse.close")&&n.trigger(t)})}}});