define(["jquery","util/mediaqueries"],function(e,t){var n,r,i,s;return{init:function(){n=this,n.initVars(),n._setContentRelations(),n._bindEvents(),n._initMediaQueries()},_initMediaQueries:function(){var e={queries:t.queries.large,shouldDegrade:!1,match:function(){n._moveContent(3)},unmatch:function(){}},r={queries:t.queries.medium,shouldDegrade:!0,match:function(){n._moveContent(2)},unmatch:function(){}},i={queries:t.queries.small,shouldDegrade:!0,match:function(){n._moveContent(1)},unmatch:function(){}};t.register([i,r,e])},initVars:function(){r=e(".js-projects-container"),s=r.find(".pod--project")},_setContentRelations:function(){var t=0;i=e('<div id="project-content-copy"/>'),i.hide(),s.each(function(){var n=e(this);n.attr("data-id",t);var r=n.find(".project-info");r.attr("data-id",t).append('<a class="js-proj-close iconf-close" href="#"><span class="iconf__text">close</span></a>'),i.append(r),t++}),r.append(i)},_bindEvents:function(){r.on("click",".pod--project__thumbnail",n._setSelection),r.on("click",".js-proj-close",n._closeProject)},_closeProject:function(e){e.preventDefault(),r.find(".is-selected .pod--project__thumbnail").trigger("click")},_moveContent:function(t){r.find(".content-collapse").empty().remove(),r.find(".is-selected").removeClass("is-selected"),s.filter(":nth-child("+t+"n)").after('<div class="content-collapse grid__item one-whole"/>');var n=0,o=i.children(),u=r.find(".content-collapse"),a=u.first();for(var f=0,l=o.length;f<l;f++){var c=e("<div/>");c.append(o.eq(f).clone()),f%t===0&&f>0&&(n++,a=u.eq(n)),a.append(c)}},_setSelection:function(t){var n=e(this).parent();r.find('.pod--project.is-selected:not([data-id="'+n.attr("data-id")+'"]) .pod--project__thumbnail').trigger("click"),n.toggleClass("is-selected");var i=r.find(".content-collapse [data-id="+n.attr("data-id")+"]");i.parent().toggleClass("is-selected")}}});