typeof templayed=="undefined"&&(templayed=function(e,t){var n=function(e,t){t=1,e=e.replace(/\.\.\//g,function(){return t++,""});var n=["vars[vars.length - ",t,"]"],r=e=="."?[]:e.split("."),i=0;for(i;i<r.length;i++)n.push("."+r[i]);return n.join("")},r=function(e){return e.replace(/\{\{(!|&|\{)?\s*(.*?)\s*}}+/g,function(e,t,r){if(t=="!")return"";var i=s++;return['"; var o',i," = ",n(r),", s",i," = (((typeof(o",i,') == "function" ? o',i,".call(vars[vars.length - 1]) : o",i,') || "") + ""); s += ',t?"s"+i:'(/[&"><]/.test(s'+i+") ? s"+i+'.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;") : s'+i+")",' + "'].join("")})},i=function(e){return r(e.replace(/\{\{(\^|#)(.*?)}}(.*?)\{\{\/\2}}/g,function(e,t,r,o){var u=s++;return['"; var o',u," = ",n(r),"; ",(t=="^"?["if ((o",u," instanceof Array) ? !o",u,".length : !o",u,') { s += "',i(o),'"; } ']:["if (typeof(o",u,') == "boolean" && o',u,') { s += "',i(o),'"; } else if (o',u,") { for (var i",u," = 0; i",u," < o",u,".length; i",u,"++) { vars.push(o",u,"[i",u,']); s += "',i(o),'"; vars.pop(); }}']).join(""),'; s += "'].join("")}))},s=0;return new Function("vars",'vars = [vars], s = "'+i(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"))+'"; return s;')},templayed.version="0.2.1");