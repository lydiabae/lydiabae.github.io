define(["../array/some"],function(e){function o(t,n){var r,i=e(n,function(e){return!!(r=e.exec(t))});return i?r:null}function u(e,t,n){var r=new Date(Date.UTC(e,t,n));r.setUTCFullYear(e);var i=r.getUTCFullYear()===e&&r.getUTCMonth()===t&&r.getUTCDate()===n;return i?+r:NaN}function a(e){var t=n.exec(e);if(t){var r=+t[1],i=+t[2],s=new Date(Date.UTC(r,0,i));if(s.getUTCFullYear()===r)return+s}return NaN}function f(e){var n,r,i,s,n=o(e,t);return n===null?a(e):(r=n[1]===void 0?0:+n[1],i=n[2]===void 0?0:+n[2]-1,s=n[3]===void 0?1:+n[3],u(r,i,s))}function l(e,t,n){var r=e<24&&e>=0&&t<60&&t>=0&&n<60&&t>=0||e===24&&t===0&&n===0;return r?((e*60+t)*60+n)*1e3:NaN}function c(e){var t;if(e.charAt(e.length-1)==="Z")e=e.substring(0,e.length-1);else if(t=s.exec(e)){var t=s.exec(e);if(t){var n=+t[3],r=t[4]===void 0?0:+t[4],i=l(n,r,0);return t[2]==="-"&&(i*=-1),{offset:i,time:t[1]}}}return{offset:0,time:e}}function h(e){var t,n=c(e);e=n.time,n=n.offset;if(isNaN(n))return NaN;t=o(e,r);if(t===null)return NaN;var i=t[1]===void 0?0:+t[1],s=t[2]===void 0?0:+t[2],u=t[3]===void 0?0:+t[3];return l(i,s,u)-n}function p(e){var t=i.exec(e);return t?f(t[1])+h(t[2]):f(e)}var t=[/^([0-9]{4})$/,/^([0-9]{4})-([0-9]{2})$/,/^([0-9]{4})-?([0-9]{2})-?([0-9]{2})$/],n=/^([0-9]{4})-?([0-9]{3})$/,r=[/^([0-9]{2}(?:\.[0-9]*)?)$/,/^([0-9]{2}):?([0-9]{2}(?:\.[0-9]*)?)$/,/^([0-9]{2}):?([0-9]{2}):?([0-9]{2}(\.[0-9]*)?)$/],i=/^(.+)T(.+)$/,s=/^(.+)([+\-])([0-9]{2}):?([0-9]{2})$/;return p});