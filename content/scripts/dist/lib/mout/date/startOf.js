define(["../lang/clone"],function(e){function t(t,n){t=e(t);switch(n){case"year":t.setMonth(0);case"month":t.setDate(1);case"week":case"day":t.setHours(0);case"hour":t.setMinutes(0);case"minute":t.setSeconds(0);case"second":t.setMilliseconds(0);break;default:throw new Error('"'+n+'" is not a valid period')}if(n==="week"){var r=t.getDay(),i=t.getDate();r&&(r>=i&&t.setDate(0),t.setDate(t.getDate()-t.getDay()))}return t}return t});