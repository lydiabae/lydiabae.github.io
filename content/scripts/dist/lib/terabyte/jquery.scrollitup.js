(function(e,t,n,r){function u(t,n){var r,u;this.element=t,this.$element=e(this.element),this.options=e.extend({},s,n),this.$container=e(t).find(this.options.itemsWrapper),this.$viewport=e(t).find(this.options.viewport),this.$items=this.$container.find(this.options.items),this.itemsLength=this.$container.find(this.options.items).length,this._defaults=s,this._name=i,this.intervalId=0,this.minScroll=0,this.scrollDirection=this.options.vertical?"top":"left";if(!this.$items.length)return;r=this.$container.find(this.options.items).eq(this.itemsLength-1),this.maxScroll=this.options.vertical?this.$container.height()-this.$viewport.height():r.position().left+r.width()-this.$viewport.width(),this.setup[this.options.setup](this,this.options.responsiveConfig),this.initControls(),this.initTriggers(),this.options.lazyLoad&&(u=this.$items.index(this.$items.filter(".is-selected")),o.getImages(this.$items,u,this.options.responsiveConfig.itemsPerView))}var i="scrollItUp",s={vertical:!1,next:".scroller-next",previous:".scroller-previous",speed:500,step:200,easing:"easeInOutExpo",itemsWrapper:".scroller-content",items:".scroller-item",viewport:".scroller-viewport",setup:"responsive",onhover:!1,lazyLoad:!1,responsiveConfig:{itemWidth:210,margin:20,itemsPerView:4}},o={getImages:function(t,n,r){var i=t.slice(n,n+r),s=i.find("img").filter(function(){var t=e(this);return!!t.attr("data-original")&&t[0].src.indexOf(t.attr("data-original"))===-1});s.lazyload({event:"scrollitup",effect:"fadeIn",skip_invisible:!1})}};u.prototype.initTriggers=function(){var t=this.$element.find(this.options.next)[0],n=this.$element.find(this.options.previous)[0];this.$element.on("scrollitup.update",this.update),this.$element.on("scrollitup.next",{proxy:this},e.proxy(this.move,t)),this.$element.on("scrollitup.previous",{proxy:this},e.proxy(this.move,n))},u.prototype.removeTriggers=function(){this.$element.off("scrollitup.update"),this.$element.off("scrollitup.next"),this.$element.off("scrollitup.previous")},u.prototype.setup={responsive:function(e,t){var n=t.itemWidth,r=t.margin,i=n-r,s=t.itemsPerView,o=n*e.itemsLength,u=n*s-r,a=o/u*100,f=r/o*100,l=r/u*100*-1,c=i/o*100;e.$container.css({width:a+"%",marginLeft:l+"%"}),e.$container.find(e.options.items).css({width:c+"%",marginLeft:f+"%"})}},u.prototype.initControls=function(){this.$element.find(this.options.next+", "+this.options.previous).on("click",{proxy:this},this.move)},u.prototype.move=function(t){t.preventDefault();var n,r,i,s,u=t.data.proxy,a=e(this),f=!1,l=a.is(u.options.next)?"next":"previous",c=u.options.responsiveConfig,h=c.itemWidth*c.itemsPerView-c.margin,p=u.$container.find(".is-selected"),d=u.$items.index(p)>0?u.$items.index(p):0;l==="next"?(a.is(".is-ended")?(n=0,r=0,f=e(u.options.previous),i=!0):d+c.itemsPerView>u.itemsLength-1-c.itemsPerView?(n=u.itemsLength-c.itemsPerView,r=n*c.itemWidth,i=!0):(n=d+c.itemsPerView,r=n*c.itemWidth,i=!1),u.options.lazyLoad&&o.getImages(u.$items,n,u.options.responsiveConfig.itemsPerView)):a.is(".is-ended")?(n=u.itemsLength-c.itemsPerView,r=n*c.itemWidth,f=e(u.options.next),i=!0):d-c.itemsPerView<=0?(n=0,r=0,i=!0):(n=d-c.itemsPerView,r=n*c.itemWidth,i=!1),f?u.setAtEnd(f,i):u.setAtEnd(a,i),s=r/h*100*-1+"%",e.proxy(u.animate(s),u),u.setSelected(n)},u.prototype.animate=function(e){Modernizr.csstransitions?this.$container.css({left:e}):this.$container.animate({left:e},{easing:"easeInOutExpo",duration:500})},u.prototype.update=function(e){var t,n=e.proxy,r=e.responsiveConfig,i=r.itemWidth*r.itemsPerView-r.margin,s=n.$container.find(".is-selected"),o=n.$items.index(s)>0?n.$items.index(s):0;t=o/i*100*-1+"%",n.setup.responsive(n,r),n.animate(t)},u.prototype.setSelected=function(e){this.$container.find(".is-selected").removeClass("is-selected"),this.$items.eq(e).addClass("is-selected")},u.prototype.isDisabled=function(e){return e.hasClass("is-ended")},u.prototype.setAtEnd=function(e,t){var n=t?"addClass":"removeClass";this.$element.find(this.options.next+", "+this.options.previous).removeClass("is-ended"),e[n]("is-ended")},u.prototype.destroy=function(){this.resetMeasurements(),this.resetSelected(),this.removeEvents(),this.removeData()},u.prototype.removeData=function(){this.$element.removeData("plugin_"+i)},u.prototype.removeEvents=function(){this.$element.find(this.options.next+", "+this.options.previous).off("click",this.move)},u.prototype.resetMeasurements=function(){var t={width:"","margin-left":""};this.$container.css(t),this.$items.each(function(){e(this).css(t)})},u.prototype.resetSelected=function(){this.$container.find(".is-selected").removeClass("is-selected"),this.$items.first().addClass("is-selected")},e.fn[i]=function(t){if(t==="destroy"){var n=e(this).data("plugin_"+i);if(!n)return;n.destroy();return}return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new u(this,t))})}})(jQuery,window,document);