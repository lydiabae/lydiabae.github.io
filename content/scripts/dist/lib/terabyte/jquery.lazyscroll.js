(function(e,t,n,r){function c(t,n){this.element=t,this.$element=e(t),this.options=e.extend({},s,n),this.position=u(this.$element),this._defaults=s,this._name=i,this.init()}var i="lazyScroll",s={tolerance:100,callback:function(){console.log("scrolled")}},o=e(t),u=function(e){return e.offset().top},a=function(){return o.scrollTop()},f=function(n,r){return n<=a()+e(t).height()+r},l=function(){o.data("/lazyscroll/scroll")||(o.on("scroll",e.throttle(250,function(){e.publish("/lazyscroll/scroll")})),o.data("/lazyscroll/scroll",!0)),o.data("/lazyscroll/resize")||(o.on("resize",e.throttle(250,function(){e.publish("/lazyscroll/resize")})),o.data("/lazyscroll/resize",!0))};c.prototype={init:function(){this.initSubscriptions(),this.processScrollEvent(this)},initSubscriptions:function(){var t=this;e.subscribe("/lazyscroll/scroll",function(){t.processScrollEvent(t)}),e.subscribe("/lazyscroll/resize",function(){t.recalculatePosition(t),t.processScrollEvent(t)})},processScrollEvent:function(e){if(e.$element){var t=f(e.position,e.options.tolerance);t&&(e.fire.call(e),this.$element.trigger("lazyscroll.fire"),e.$element=null)}},recalculatePosition:function(e){e.$element&&(e.position=u(this.$element))},fire:function(){this.options.callback.call(this.element)}},e.fn[i]=function(t){return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new c(this,t))})},l()})(jQuery,window,document);